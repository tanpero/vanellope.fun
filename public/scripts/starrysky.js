const starrysky=function(){let t,e,n,o,i,a,l,r,c,h,s,d,f;return{init:function(f){if(f&&"CANVAS"===f.nodeName){t=f,t.width=t.clientWidth,t.height=t.clientHeight,t.style.backgroundColor="black",e=t.getContext("2d"),n=t.clientWidth,o=t.clientHeight,a=["255, 255, 255"],l=1,r=.4,c=.2,h=5e-4,s=n*r,d=Math.ceil(n*c),i=[];for(let t=0;t<d;t++)i[t]={x:n*(.1+.8*Math.random()),y:o*(.1+.8*Math.random()),z:s*Math.random(),color:a[Math.ceil(1e3*Math.random())%a.length]};const u=this;window.addEventListener("resize",u.throttle((function(){t.width=t.clientWidth,t.height=t.clientHeight,n=t.clientWidth,o=t.clientHeight,s=n*r;const e=Math.ceil(n*c);if(d>e)i.splice(e);else{let t=e-d;for(;t--;)i.push({x:n*(.1+.8*Math.random()),y:o*(.1+.8*Math.random()),z:s*Math.random(),color:a[Math.ceil(1e3*Math.random())%a.length]})}d=Math.ceil(n*c)}),200))}else console.error("初始化失败，必须传入Canvas元素")},setSkyColor:function(e="black"){t.style.backgroundColor=e},setStarRadius:function(t=1){l=t},setFocalDistanceLevel:function(t=.4){r=t,s=n*r},setStarCountLevel:function(t=.2){c=t;const e=Math.ceil(n*c);if(d>e)i.splice(e);else{let t=e-d;for(;t--;)i.push({x:n*(.1+.8*Math.random()),y:o*(.1+.8*Math.random()),z:s*Math.random(),color:a[Math.ceil(1e3*Math.random())%a.length]})}d=Math.ceil(n*c)},setStarSpeedLevel:function(t=5e-4){h=t},setStarColorList:function(t,e=!1){if("object"==typeof t?a=t:"string"==typeof t&&a.push(t),e)for(let t=0;t<i.length;t++)i[t].color=a[Math.ceil(1e3*Math.random())%a.length]},render:function(){const t=n*r*h;e.clearRect(0,0,n,o);for(let r=0;r<i.length;r++){const c=i[r],h=(c.x-n/2)*(s/c.z)+n/2,d=(c.y-o/2)*(s/c.z)+o/2;if(c.z-=t,c.z>0&&c.z<=s&&h>=-20&&h<=n+20&&d>=-20&&d<=o+20){const t=l*(s/c.z*.8),n=1-c.z/s*.8;e.fillStyle="rgba("+c.color+", "+n+")",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor="rgb("+c.color+")",e.shadowBlur=10,e.beginPath(),e.arc(h,d,t,0,2*Math.PI),e.fill()}else{const t=s*Math.random();c.x=n*(.1+.8*Math.random()),c.y=o*(.1+.8*Math.random()),c.z=t,c.color=a[Math.ceil(1e3*Math.random())%a.length]}}const c=this;f=window.requestAnimationFrame((function(){c.render()}))},destroy:function(){window.cancelAnimationFrame(f),i=[],e.clearRect(0,0,n,o),t.width=0,t.height=0},debounce:function(t,e=200){let n;return function(){n&&clearTimeout(n),n=setTimeout((function(){t()}),e)}},throttle:function(t,e=200){let n=null,o=0;return function(){Date.now()-o>e?(clearTimeout(n),o=Date.now(),t()):n=setTimeout(t,e)}}}}();